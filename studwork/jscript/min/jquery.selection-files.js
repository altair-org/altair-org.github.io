!function(e){var t=e.extend({maxFiles:12,maxFileSize:41943040,multiple:!0,extensions:"gif, png, txt, jpg, rar, zip, pdf, doc, docx, odt, odf, xls, xlsx, ppt, pptx, jpeg, tga, tiff, svg, djvu, rtf, dwg, bmp, GIF, PNG, TXT, JPG, RAR, ZIP, PDF, DOC, DOCX, ODT, ODF, XLS, XLSX, PPT, PPTX, JPEG, TGA, TIFF, SVG, DJVU, RTF, DWG, BMP"}),i=["'",'"',"\\","/","|","&","%","$","#","<",">","{","}"],l=t.extensions.replace(/,\s*/g,"|"),a='<div class="line" style="display: none;">                 <div class="icon"><img src="" alt=""/></div>                 <div class="name"></div>                 <div class="size t-grey"></div>                 <div class="download preload-file"><a data-tooltip="top" title="Отменить закачку файла" href="">Отменить</a></div>                 </div>',d={init:function(i){t.multiple?e(this).attr("multiple",!0):e(this).removeAttr("multiple")},newFile:function(l){"stud-add-order-demo-butt"==e(this).attr("id")&&(a='<div class="line stud-uawf-files-block" style="display: none;">                                    <div class="icon"><img src="" alt=""></div>                                    <div class="name t-blue"></div>                                    <div class="size t-grey"></div>                                    <div class="download preload-file del"><a data-tooltip="top" title="Отменить закачку файла" href="">Отменить</a></div>                                </div>'),"stud-add-order-shop-butt"==e(this).attr("id")&&(a='<div class="line stud-uawf-files-block" style="display: none;">                                    <div class="icon"><img src="" alt=""></div>                                    <div class="name t-blue"></div>                                    <input class="stud-input-icon form-icon-bgr-rub modal-file-price" maxlength="6" placeholder="Сумма">                                    <div class="size t-grey"></div>                                    <div class="download preload-file del"><a data-tooltip="top" title="Отменить закачку файла" href="">Отменить</a></div>                                </div>');for(var d=e(this)[0].files,r=0;r<d.length;r++){var c,f=d[r];if(Object.keys(l).length>=t.maxFiles){alert("Максимальное количество файлов "+t.maxFiles);break}if(f.clearName=o(i,"",f.name),f.ext=f.name.replace(/^.*\.([^.]+)/,"$1"),void 0==l[f.clearName])if(c=s(f)){var p="При добавлении файла "+f.name+" возникла ошибка: \n"+c;errorModal(p,"")}else{l[f.clearName]=f;var u=e(a),v="/img/type_files/"+f.ext.toLowerCase()+".svg";if(u.attr("data-name",f.clearName),u.find(".icon img").attr("src",v),u.find(".name").text(f.clearName),u.find(".size").html(n(f.size,1)),e(".stud-modal-is-open").length?e(".stud-modal-is-open").find(".file-block-full").append(u):"stud-add-order-demo-butt"==e(this).attr("id")?e(".stud-uawf-exam.file-block-full").append(u):"stud-add-order-shop-butt"==e(this).attr("id")?(e(".stud-uawf-shop.file-block-full").append(u),stud_input_icon()):e(".file-block-full").append(u),e(".stud-modal-is-open").find(".stud-upload-input").hasClass("with-price")){var m='<div class="stud-input-icon-div is-form-icon-bgr-rub"><input class="stud-input-icon form-icon-bgr-rub modal-file-price" maxlength="6" placeholder="Сумма"></div>';u.find(".download").before(m)}u.slideDown(300,function(){g()}),e(".file-block-full").find(".download:last a").on("click",function(){return h(e(this).parents(".line")),!1})}}e(this).val("");var g=function(t){e("#stud-mess-foot").length>0&&(fix_is(),e("html, body").animate({scrollTop:e(document).height()},500))},h=function(t){var i=t.attr("data-name");void 0!=l[i]&&delete l[i],e("#stud-upload-input").length&&!e("#take-work-name").length?t.remove():t.slideUp(300,function(){t.remove(),show_upload_butt()}),g()}}},n=function(e,t){var i=e/1024,l="Kb";return i>1024&&(i/=1024,l="Mb"),i.toFixed(t)+" "+l},s=function(e){var i=!1;return e.ext.match("("+l+")")?e.clearName.length>256?i="Слишком длинное название файла. Необходимо менее 256 символов":e.size>t.maxFileSize&&(i="Слишком большой файл. Максимальный размер файла - "+n(t.maxFileSize,0)):i="Файл с данным расширением загрузить нельзя. Доступные расширения для загрузки: gif, png, txt, jpg, rar, zip, pdf, doc, docx, odt, odf, xls, xlsx, ppt, pptx, jpeg, tga, tiff, svg, djvu, rtf, dwg, bmp",i},o=function(e,t,i){if(!(t instanceof Array)&&(t=new Array(t),e instanceof Array))for(;e.length>t.length;)t[t.length]=t[0];for(e instanceof Array||(e=new Array(e));e.length>t.length;)t[t.length]="";if(i instanceof Array){for(l in i)i[l]=o(e,t,i[l]);return i}for(var l=0;l<e.length;l++)for(var a=i.indexOf(e[l]);a>-1;)i=i.replace(e[l],t[l]),a=i.indexOf(e[l],a);return i};e.fn.selectionFiles=function(t){return d[t]?d[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Метод с именем "+t+" не существует"):d.init.apply(this,arguments)}}(jQuery);