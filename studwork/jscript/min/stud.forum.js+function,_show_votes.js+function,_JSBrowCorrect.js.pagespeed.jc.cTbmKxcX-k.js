var mod_pagespeed_2wiWA4R362 = "jQuery(document).ready(function(e){function t(){e(\".comment-answer-block\").each(function(){e(this).hasClass(\"comment-answer-main\")||e(this).slideUp(500,function(){e(this).remove()})}),e(\".comment-answer-main\").slideDown(500),e(\".in-block.answer\").text(\"Ответить\")}function n(t,n,o){if(0===o.value_click_comment){o.value_click_comment=1;var i=n.parent().parent(),a=i.find(\"textarea\").val();if(\"\"!==a){var s=0,m=\"\";if(!i.hasClass(\"comment-answer-main\")){s=1*i.parent().attr(\"data-next\")+1,s>r&&(s=r),m='<div class=\"comments-points\" style=\"width: '+30*s+'px\">';for(var u=0;s>u;u++)m+='<div class=\"is-point\"></div>';m+=\"</div>\"}e(\"#forum-theme-count-comments\").text(Number(e(\"#forum-theme-count-comments\").text())+1),e(\"#forum-theme-ending-count-comments\").text(JSBrowCorrect(Number(e(\"#forum-theme-count-comments\").text())));var l=Number(i.parent().attr(\"data-rec\"));isNaN(l)&&(l=0);var c=Number(i.parent().attr(\"data-next\"))+1;isNaN(c)&&(c=0);var d=Number(i.parent().attr(\"data-id-level-report\"));isNaN(d)&&(d=0);var f={id_theme:id_forum_theme,id_rec:l,text_report:a,id_level:c,id_level_report:d},h={comment_block:i,next_comment:s,rec_points:m,max_deep:r,id_rec:l,id_level_report:d,id_level:c,click_comment:o};AjaxRequest(\"ForumSendReport\",JSON.stringify(f),secret_hash_forum_send_report,h)}else i.find(\"textarea\").focus()}}function o(){e(\".stud-upload-modal\").find(\".line\").length>0?e(\".stud-upload-modal-butt-load\").stop().slideDown(function(){stud_center_modal(\".stud-upload-modal\")}):e(\".stud-upload-modal-butt-load\").stop().slideUp(function(){stud_center_modal(\".stud-upload-modal\")})}function i(){var t=window.location.hash.replace(\"#\",\"\");if(t&&e(\"[data-id-level-report=\"+t+\"]\").length){var n=e(\"[data-id-level-report=\"+t+\"]\").offset().top;scroll_this_point(n)}}var r=8,a={value_click_comment:0};e(window).load(function(){var t=e(\".stud-forum-theme .title-block .in-part\").width()+20;e(\".stud-forum-theme .title-block .title\").css(\"margin-right\",t+\"px\"),show_votes(),i()});var s=e(\".comment-line\");s.each(function(t){for(var n=e(this).attr(\"data-next\"),o=array_id_report_diff.length-1;o>=0;o--)array_id_report_diff[o]===e(this).data(\"id-level-report\")&&e(this).addClass(\"new-message\");if(s.length===t+1&&!+id_current_user){var i=\"<div class='end-block'></div>\";e(this).parent().append(i)}if(n>=r){e(this).find(\".answer\").remove()}if(0!==n){for(var a=\"\",o=0;n>o;o++)a+='<div class=\"is-point\"></div>';e(this).find(\".user-icon\").prepend('<div class=\"comments-points\"></div>').find(\".comments-points\").width(30*n).html(a)}}),e(\".comments-area\").on({mouseenter:function(t){e(this).addClass(\"comment-hover\")},mouseleave:function(t){e(this).removeClass(\"comment-hover\")}},\".comment-line\"),e(\".comments-area\").on(\"click\",\".in-block.answer\",function(n){n.stopPropagation();var o=e(this).parents(\".comment-line\").attr(\"data-id-level-report\"),i=e(this).parent().parent(),r=e(this).parent().find(\".name\").text();if(e(\".comment-answer-block\").attr(\"data-idlvlrep\")!=o){e(\".in-block.answer\").text(\"Ответить\"),e(\".comment-answer-block\").slideUp(500,function(){e(this).hasClass(\"comment-answer-main\")||e(this).remove()});var a='<div class=\"comment-answer-block\" data-idlvlrep=\"'+o+'\" style=\"display: none\">';a+='<div class=\"relative\">',a+='<textarea class=\"rubber-textarea\" rows=\"3\" placeholder=\"Напишите ваше сообщение для '+r+'\"></textarea>',a+=\"</div>\",a+='<div class=\"buttons-block\">',a+='<a class=\"stud-button stud-button-blue stud-button-icon-papair send-comment\">Отправить сообщение</a>',a+=\"</div></div>\",i.find(\".text:first\").after(a);var s=i.find(\".comment-answer-block\");s.slideDown(500,function(){var t=s.offset().top+s.outerHeight(),n=e(window).scrollTop()+e(window).height();t>n?(scroll_this_point(s.offset().top),setTimeout(function(){s.find(\"textarea\").focus()},700)):s.find(\"textarea\").focus()}),o=\"\",e(this).text(\"Отменить\");var m=new app.Editor({inputSelector:e(this).parent().parent().find(\".comment-answer-block .rubber-textarea\"),smiles:{init:!0}});m.run()}else t()}),e(\".comments-area, .comment-answer-main\").on(\"click\",\".send-comment\",function(t){n(t,e(this),a)}),e(\".comments-area, .comment-answer-main\").on(\"keydown\",\".rubber-textarea\",function(o){var i=e(this).parent().find(\".send-comment\");o.ctrlKey&&13==o.keyCode&&n(o,i,a),27==o.keyCode&&t()}),e(\"#accept-my-vote\").on(\"click\",function(){var t=!1,n=\"\";e(\"input[name=votes-radio]\").each(function(){if(\"checked\"==e(this).attr(\"checked\")){t=!0,n=e(this).val();var o={id_theme:id_forum_theme,value_voting:n};return\"undefined\"!=typeof secret_hash_forum_voting&&AjaxRequest(\"ForumVoting\",JSON.stringify(o),secret_hash_forum_voting),!1}}),t||stud_open_modal(\"#votes-modal\")}),e(\".votes-lines\").on(\"click\",function(){var t=e(this).find(\"input[name=votes-lines]\");if(e(\".vote-input\").length!=t.val()){var n=e(\".vote-input\").length,o=t.val();if(o>n){for(var i=n;o>i;i++){var r='<div class=\"vote-input-div\" style=\"display: none\"><input type=\"text\" name=\"new-variations-'+(i+1)+'\" class=\"top all-width vote-input\" maxlength=\"80\" placeholder=\"Вариант '+(i+1)+'\"></div>';e(\".stud-forum-new-variations\").append(r)}e(\".vote-input-div\").stop().slideDown(500,function(){e(\"#forum-theme-editor\").length&&e(\"#forum-theme-editor\").hasClass(\"stud-modal-is-open\")&&stud_center_modal(\"#forum-theme-editor\")})}else for(var a=n;a>o;a--)e(\".vote-input-div\").eq(a-1).stop().slideUp(500,function(){e(this).remove(),e(\"#forum-theme-editor\").length&&e(\"#forum-theme-editor\").hasClass(\"stud-modal-is-open\")&&stud_center_modal(\"#forum-theme-editor\")})}}),e(\".open-votes\").on(\"click\",function(){e(this).hasClass(\"checked\")?e(\".stud-forum-new-vote-block\").stop().slideDown(700,function(){e(\"#forum-theme-editor\").length&&e(\"#forum-theme-editor\").hasClass(\"stud-modal-is-open\")&&stud_center_modal(\"#forum-theme-editor\")}):e(\".stud-forum-new-vote-block\").stop().slideUp(700,function(){e(\"#forum-theme-editor\").length&&e(\"#forum-theme-editor\").hasClass(\"stud-modal-is-open\")&&stud_center_modal(\"#forum-theme-editor\")})}),e(\".stud-modal-upload-forum-new-file\").length&&e(\".stud-modal-upload-forum-new-file\").selectionFiles();var m={};e(\"#stud-forum-new-add-pic\").on(\"click\",function(){stud_open_modal(\"#stud-forum-new-file\")}),e(\".stud-modal-upload-forum-new-file\").on(\"change\",function(){var t=e(\"#stud-forum-new-file\").find(\".file-block-full\").find(\".line\");t.length>0&&(m={},t.remove()),e(\".stud-upload-modal-butt-load\").hide(),e(\".stud-modal-upload-forum-new-file\").selectionFiles(\"newFile\",m),setTimeout(function(){o()},300)}),e(\"#upload-forum-new-file\").on(\"click\",function(){var e=[];e.files=m}),e(\"#forum-theme-arrow-up\").on(\"click\",function(){var e={id_theme:id_forum_theme,value:\"up\"};\"undefined\"!=typeof secret_hash_forum_rating_theme&&AjaxRequest(\"ForumRatingTheme\",JSON.stringify(e),secret_hash_forum_rating_theme)}),e(\"#forum-theme-arrow-down\").on(\"click\",function(){var e={id_theme:id_forum_theme,value:\"down\"};\"undefined\"!=typeof secret_hash_forum_rating_theme&&AjaxRequest(\"ForumRatingTheme\",JSON.stringify(e),secret_hash_forum_rating_theme)}),e(\".user-arrow-up\").on(\"click\",function(){var t={id_sender:e(this).attr(\"data-rec\"),id_report:e(this).attr(\"data-report\"),value:\"up\"};\"undefined\"!=typeof secret_hash_forum_rating_report&&AjaxRequest(\"ForumRatingReport\",JSON.stringify(t),secret_hash_forum_rating_report)}),e(\".user-arrow-down\").on(\"click\",function(){var t={id_sender:e(this).attr(\"data-rec\"),id_report:e(this).attr(\"data-report\"),value:\"down\"};\"undefined\"!=typeof secret_hash_forum_rating_report&&AjaxRequest(\"ForumRatingReport\",JSON.stringify(t),secret_hash_forum_rating_report)}),e(\".forum-theme-edit\").on(\"click\",function(){window.location.href=name_site_external+\"forum/\"+id_forum_theme+\"/redactor\"}),e(\"#forum-theme-new-title\").change(function(){check_field(e(this),\"Название темы должно содержать не менее 10 символов\",10)}),e(\"#forum-theme-new-text\").change(function(){check_field(e(this),\"Описание темы должно содержать не менее 100 символов\",100)}),e(\"#forum-theme-save-change\").on(\"click\",function(){var t=e(\"#forum-theme-new-title\").val(),n=e(\"#forum-theme-new-text\").val(),o=\"\",i=[],r=[];if(t.length<10)return set_input_flag(e(\"#forum-theme-new-title\"),!1,\"Название темы должно содержать не менее 10 символов\"),!1;if(clear_input_flag(e(\"#forum-theme-new-title\")),n.length<100)return set_input_flag(e(\"#forum-theme-new-text\"),!1,\"Описание темы должно содержать не менее 100 символов\"),!1;if(clear_input_flag(e(\"#forum-theme-new-text\")),e(\".open-votes\").hasClass(\"checked\")){o=e(\"#vote-title-modal\").val(),e(\".stud-forum-new-variations\").find(\".vote-input-div\").each(function(){i[e(this).index()]=e(this).find(\".vote-input\").val()});for(var a=0;a<i.length;a++)r.push(i[a])}e(\".title-block\").find(\".title\").find(\"h1\").text(t),e(\".text-block\").text(n);var s={id_theme:id_forum_theme,topic_theme:t,text_theme:n,vote_title:o,votes_arr:r.join(\"|\")};AjaxRequest(\"ForumRedactorTheme\",JSON.stringify(s),secret_hash_forum_redactor_theme)}),e(\"#forum-theme-topic\").change(function(){check_field(e(this),\"Название темы должно содержать не менее 10 символов\",10)}),e(\"#forum-theme-text\").change(function(){check_field(e(this),\"Описание темы должно содержать не менее 100 символов\",100)}),e(\"#open-new-theme\").on(\"click\",function(){var t=e(\"#forum-theme-topic\").val();if(t.length<10)return set_input_flag(e(\"#forum-theme-topic\"),!1,\"Название темы должно содержать не менее 10 символов\"),!1;clear_input_flag(e(\"#forum-theme-topic\"));var n=e(\"#forum-theme-text\").val();if(n.length<100)return set_input_flag(e(\"#forum-theme-text\"),!1,\"Описание темы должно содержать не менее 100 символов\"),!1;clear_input_flag(e(\"#forum-theme-text\"));var o=\"\",i=[],r=[];if(e(\".open-votes\").hasClass(\"checked\")){o=e(\"#vote-title-modal\").val(),e(\"#stud-forum-new\").find(\".vote-input-div\").each(function(){i[e(this).index()]=e(this).find(\".vote-input\").val()});for(var a=0;a<i.length;a++)r.push(i[a])}var s={topic_theme:t,text_theme:n,section:e(\"#forum-theme-section\").val(),vote_title:o,votes_arr:r.join(\"|\")};AjaxRequest(\"ForumNewTheme\",JSON.stringify(s),secret_hash_forum_new_theme)}),e(\"#admin-public-forum-theme\").on(\"click\",function(e){e.preventDefault();var t={id_theme:id_forum_theme};AjaxRequest(\"AdminPublicForumTheme\",JSON.stringify(t),\"secret_hash\")}),e(\"#admin-unpublic-forum-theme\").on(\"click\",function(e){e.preventDefault();var t={id_theme:id_forum_theme};AjaxRequest(\"AdminUnPublicForumTheme\",JSON.stringify(t),\"secret_hash\")}),e(\".ban-user-forum\").on(\"click\",function(){var t={id_user:e(this).attr(\"data-id-user\")};AjaxRequest(\"AdminBanUserForum\",JSON.stringify(t),\"secret_hash\"),e(this).css(\"color\",\"#e84c3d\")}),e(\".del-forum-comment\").on(\"click\",function(){var t={id_comment:e(this).attr(\"data-id-comment\")};AjaxRequest(\"AdminDelForumComment\",JSON.stringify(t),\"secret_hash\"),e(this).css(\"color\",\"#386e9b\"),e(this).parent().parent().find(\".text\").html(\"&#10005; Комментарий удален\")});var u=1,l=function(e){var t=function(e){return\"0\"===e.userVip?\"t-grey\":\"t-orange\"},n=function(e){return e>0?\"t-green\":0>e?\"t-red\":void 0},o=function(e){return e>0?\"+\"+e:e},i=\"<div class='order'>                            <ul class='info'>                                <li><a href='/forum/\"+e.forumID+\"'>\"+e.forumThemeName+\"</a></li>                                <li><i class='fa fa-user \"+t(e)+\"'></i> <a href='/info/\"+e.userID+\"'>\"+e.userName+\"</a></li>                                <li class='activity'>                                    <span class='t-grey likes'><i class='fa fa-thumbs-o-up'></i> <span class='\"+n(e.likes)+\"'>\"+o(e.likes)+\"</span></span>                                    <span class='t-blue'><i class='fa fa-comment'></i> \"+e.comments+\"</span>                                    <span class='t-grey'><i class='fa fa-eye'></i> \"+e.views+\"</span>                                </li>                            </ul>                        </div>\";return i};e(\"#more-themes\").on(\"click\",function(t){t.preventDefault();var n={counter:u,id_forum_theme:id_forum_theme},o=e(this),i=e(this).prev(\".orders\"),r=e.ajax({url:\"/request-server.php\",method:\"POST\",data:{name_request:\"getSimilarThemes\",array_assoc_param:JSON.stringify(n),secret_hash:\"Secret\"},dataType:\"json\"});r.done(function(e){app.render.renderOrders(e,o,5,l,i,app.render.scrollTo)}),r.fail(function(e,t){console.log(\"Error: \"),console.log(t)}),u++});var c={smiles:{init:!0}},d=new app.Editor(c);d.run();var f=new app.Editor({inputSelector:e(\".comment-answer-block .rubber-textarea\"),smiles:{init:!0}});f.run()});";
var mod_pagespeed_BS0rq84xsD = "function show_votes(){if($(\".result-block\").length){var t=[],e=0;$(\".result-block\").find(\".result-line\").each(function(){t[e]=1*$(this).find(\".total-line\").text(),e++});for(var l=Math.max.apply(Math,t),i=0;i<t.length;i++){var n=Math.round(t[i]/(l/100)),o=$(\".result-line\").eq(i).find(\".total-line\");o.css(\"width\",0).animate({width:n+\"%\"},2e3,\"easeInOutCubic\")}$(\".vote-block\").slideUp(700,function(){$(this).remove(),$(\".result-block\").slideDown(700)})}}";
var mod_pagespeed_VQeOvKVnHl = "function JSBrowCorrect(r){var n=r%10;return 0==n?\"ов\":1==n&&r%100!=11?\"\":5>n&&(r%100>16||8>r%100)?\"а\":\"ов\"}";
