jQuery(document).ready(function(a){function t(t){var s=!1;return""!=t.val()?a.ajax({url:"https://ajax.studwork.org/testingLoginEmail.php",type:"GET",data:"login="+t.val(),cache:!1,async:!1,success:function(a){a=a.trim(),"no"==a?(set_input_flag(t,!0),s=!0):(set_input_flag(t,!1,"Логин не существует"),s=!1)}}):(set_input_flag(t,!1,"Введите логин"),s=!1),s}function s(a){var t=!1;return""!=a.val()?a.val().length<5?(set_input_flag(a,!1,"Введите не менее 5 символов"),t=!1):(set_input_flag(a,!0),t=!0):(set_input_flag(a,!1,"Введите пароль"),t=!1),t}function i(a){var t=!1;return""!=a.val()?(set_input_flag(a,!0),t=!0):(set_input_flag(a,!1,"Введите проверочный код"),t=!1),t}function e(t){var s=!1;return""!=t.val()?n.test(t.val())?a.ajax({url:"https://ajax.studwork.org/testingLoginEmail.php",type:"GET",data:"email="+t.val(),cache:!1,async:!1,success:function(a){a=a.trim(),"no"==a?(set_input_flag(t,!0),s=!0):(set_input_flag(t,!1,"Email не зарегистрирован"),s=!1)}}):(set_input_flag(t,!1,"Введите корректный адрес"),s=!1):set_input_flag(t,!1,"Введите вашу почту"),s}a(window).load(function(){a("#stud-log-in-area").height(a("#stud-login-form").height())});var n=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;a("#login").attr("disabled","disabled"),a("#password").attr("disabled","disabled"),a("#log-forgot-butt").click(function(){a("#stud-login-form").animate({opacity:0},300,"easeInOutCubic",function(){a("#stud-login-form").hide(),a("#stud-rec-form").show(),a("#log-login").prop("disabled",!0),a("#log-pass").prop("disabled",!0),a("#log-cap").prop("disabled",!0),a("#stud-login-form input[type=submit]").prop("disabled",!0),a("#rec-mail").prop("disabled",!1),a("#rec-pass").prop("disabled",!1),a("#stud-rec-form input[type=submit]").prop("disabled",!1)}),a("#stud-log-in-area").animate({height:a("#stud-rec-form").height()},300,"easeInOutCubic",function(){a("#stud-log-area .title").text("Восстановить пароль"),a("#stud-rec-form").animate({opacity:1},300,"easeInOutCubic",function(){})})}),a("#log-login").change(function(){t(a(this))}),a("#log-pass").change(function(){s(a(this))}),a("#log-cap").change(function(){i(a(this))}),a("#rec-mail").change(function(){e(a(this))}),a("#rec-pass").change(function(){s(a(this))}),a("#stud-login-form").submit(function(){var e=t(a("#log-login")),n=s(a("#log-pass")),o=i(a("#log-cap"));if(!e)return a("#log-login").focus(),!1;if(!n)return a("#log-pass").focus(),!1;if(!o)return a("#log-cap").focus(),!1;if(e&&n&&o){var r=a("#log-login").val(),u=a("#log-pass").val(),l=a("#log-cap").val(),c={login:r,password:u,captcha:l};AjaxRequest("Authorization-Repeat",JSON.stringify(c),secret_hash_header)}return!1}),a("#stud-rec-form").submit(function(){var t=e(a("#rec-mail")),i=s(a("#rec-pass"));if(!t)return a("#rec-mail").focus(),!1;if(!i)return a("#rec-pass").focus(),!1;if(t&&i){var n={email:a("#rec-mail").val(),password:a("#rec-pass").val()};AjaxRequest("PasswordRecovery",JSON.stringify(n),secret_hash_password_recovery),stud_open_modal("#stud-user-sm-change-pass")}return!1}),a("#stud-user-sm-change-pass-a").on("click",function(){a("#stud-user-sm-change-pass-a").attr("href","mailto:"+a("#rec-mail").val())})});